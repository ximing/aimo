{
  "project": "AIMO",
  "branchName": "ralph/daily-memo-recommendations",
  "description": "每日 Memo 推荐功能 - 在 memo 列表页左侧增加 AI 智能推荐的 3 个 memo 卡片，帮助用户回顾历史内容",
  "userStories": [
    {
      "id": "US-001",
      "title": "创建 RecommendationService 服务",
      "description": "作为开发者，我需要创建一个推荐服务，使用 AI 分析 memo 内容并生成每日推荐",
      "acceptanceCriteria": [
        "创建 RecommendationService 类，使用 @Service() 装饰器",
        "实现 generateDailyRecommendations(userId) 方法",
        "使用 OpenAI API 分析所有 memo，选择 3 个最推荐的",
        "Prompt 设计：基于内容丰富度、独特性、回顾价值选择",
        "AI 异常时降级为随机选择",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "推荐结果缓存持久化",
      "description": "作为开发者，我需要将每日推荐结果持久化，确保同一天内返回一致的结果",
      "acceptanceCriteria": [
        "在 LanceDB 中创建 daily_recommendations 表",
        "表字段：userId, date, memoIds, createdAt",
        "实现缓存检查：同一天同一用户直接返回缓存",
        "实现缓存写入：新推荐生成后保存到数据库",
        "日期格式使用 YYYY-MM-DD",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "后端 API - 获取每日推荐",
      "description": "作为开发者，我需要提供一个 API 端点供前端获取今日推荐的 memo",
      "acceptanceCriteria": [
        "创建 GET /api/v1/memos/daily-recommendations 接口",
        "使用现有的 JWT 认证获取当前用户",
        "调用 RecommendationService 获取推荐",
        "返回完整的 memo 数据（id, title, content, tags, createdAt）",
        "memo 少于 3 个时返回所有 memo",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "前端 API 模块 - 每日推荐",
      "description": "作为开发者，我需要在前端创建 API 模块来调用推荐接口",
      "acceptanceCriteria": [
        "创建 dailyRecommendations API 模块",
        "实现 getDailyRecommendations() 函数",
        "返回类型使用 DTO 中的类型定义",
        "添加错误处理",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "前端 UI - 左侧推荐区域组件",
      "description": "作为用户，我需要在 memo 列表页左侧看到今日推荐的 3 个 memo 卡片",
      "acceptanceCriteria": [
        "创建 DailyRecommendations 组件",
        "显示标题'今日推荐'和当前日期",
        "展示 3 个 memo 卡片（标题 + 内容摘要前 80 字 + 创建日期）",
        "点击卡片跳转到对应 memo 详情",
        "在 memo 列表页左侧合适位置插入该组件",
        "响应式：移动端隐藏或折叠",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 5,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "空状态和加载状态处理",
      "description": "作为用户，当 memo 数量不足或加载时，我需要看到友好的提示",
      "acceptanceCriteria": [
        "少于 3 个 memo 时显示'创建更多 memo 来获取推荐'",
        "推荐服务异常时显示'今日推荐暂时不可用'",
        "加载时显示骨架屏或 loading 指示器",
        "空状态有引导用户创建 memo 的提示",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 6,
      "passes": true,
      "notes": ""
    }
  ]
}
