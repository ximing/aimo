## Codebase Patterns
- Use `routing-controllers` decorators (@Get, @Post, etc.) for API endpoints
- All services use TypeDI `@Service()` decorator for dependency injection
- Controllers return `ResponseUtil.success()` or `ResponseUtil.error()` for consistent responses
- LanceDB queries use `.where()` with SQL-like syntax for filtering
- User isolation: Every database operation must filter by `uid` for security
- Relations are stored in a separate `memo_relations` table with source/target memo IDs
- DTO types are defined in `packages/dto/src/` and shared between frontend/backend
- When adding controller endpoints, inject new services via constructor (TypeDI handles this automatically)

---

## 2026-02-17T17:30:00Z - US-001
- Implemented GET /api/v1/memos/:id/backlinks API endpoint
- Added `getBacklinks()` method to MemoRelationService to query reverse relations
- Added `getMemosByIds()` method to MemoService for batch memo fetching
- Files changed:
  - apps/server/src/controllers/v1/memo.controller.ts
  - apps/server/src/services/memo-relation.service.ts
  - apps/server/src/services/memo.service.ts
  - CLAUDE.md
- **Learnings for future iterations:**
  - The memo relations are stored in a separate `memo_relations` table with source/target fields
  - `MemoRelationService` handles all relation operations - forward relations use `getRelatedMemos()`, backlinks use `getBacklinks()`
  - Controllers use TypeDI constructor injection - just add the service to the constructor and it works
  - Pagination is done manually (slice arrays) since LanceDB doesn't have built-in pagination for this use case
  - The project has no existing test infrastructure for memo endpoints - tests would need to be set up from scratch
---
