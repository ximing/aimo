## Codebase Patterns
- Use `routing-controllers` decorators (@Get, @Post, etc.) for API endpoints
- All services use TypeDI `@Service()` decorator for dependency injection
- Controllers return `ResponseUtil.success()` or `ResponseUtil.error()` for consistent responses
- LanceDB queries use `.where()` with SQL-like syntax for filtering
- User isolation: Every database operation must filter by `uid` for security
- Relations are stored in a separate `memo_relations` table with source/target memo IDs
- DTO types are defined in `packages/dto/src/` and shared between frontend/backend
- When adding controller endpoints, inject new services via constructor (TypeDI handles this automatically)

## 2026-02-18 - US-001
- 实现首页布局整体居中
- 添加外层居中容器包裹侧边栏和 memo 区域
- 侧边栏宽度保持 300px，memo 区域最大宽度保持 640px
- 响应式行为保持不变（窄屏时侧边栏收起）
- **Files changed:**
  - `apps/web/src/pages/home/home.tsx`
- **Learnings for future iterations:**
  - 布局结构：外层 `justify-center` 容器 + 内层 flex 容器实现整体居中
  - 响应式处理：通过 `isCompact || isCollapsed` 条件控制宽度为 `w-full` 或保持 `gap-6`
  - 注意 JSX 标签闭合，编辑时容易遗漏闭合标签
## 2026-02-18 - US-002
- 验证响应式交互保持不变
- US-001 的实现已保留所有响应式逻辑：
  - `isCompact` 状态通过 `HEATMAP_COMPACT_QUERY` 媒体查询控制
  - 窄屏时侧边栏自动收起 (`isCollapsed = true`)
  - 侧边栏在 `isCompact` 模式下作为绝对定位浮层显示
  - 展开/收起按钮交互保持不变
- **Files changed:**
  - 无新文件修改（已在 US-001 中实现）
- **Learnings for future iterations:**
  - 响应式逻辑通过 `window.matchMedia()` 和 React state 结合实现
  - 媒体查询 `(max-width: 1100px)` 作为断点控制侧边栏行为
---

